= Slide deck protocol

The protocol any slide deck framework needs to implement to be part of this ecosystem.

== Commands a slide-deck can receive :

=== Mandatory

==== `get-slide-deck-details`

Ask for details about the slide deck.

[source]
----
// no args
----

==== `go-to-step`

Go to a specific step of the slide deck using its cursor

[source]
----
// The cursor of the step the slide deck needs to go to
USVString cursor;
----

=== Optional

==== `toggle-slide-deck-state`

Toggle on of the states of the current step

[source]
----
// The name of the state you want to toggle
USVString state;

// The "state" of the state
optional boolean enabled;
----

==== `set-slide-deck-ratio`

Set the ratio of the slide deck

[source]
----
// The ratio the slide deck needs to fit in
USVString ratio;
----

==== `set-slide-deck-theme`

Set the theme of the slide deck

[source]
----
// The theme to set on the slide deck
USVString theme;
----

These commands MUST be received via :

[source,js]
----
window.addEventListener('message', ({ source, data: { command, commandArgs } }) => {
    // ...
})
----

== Events a slide-deck can send :

=== Mandatory

==== `slide-deck-details`

Once a slide deck is loaded, he sends the details about himself

[source]
----
// The details of the slide deck
SlideDeckDetails details;
----

[source]
----
dictionary SlideDeckDetails {
    // Title of the talk
    USVString title;

    // Name of the author(s) of the talk
    USVString authors;

    // A description of the talk
    USVString description;

    // The name of the presentation framework (bespokejs, revealjs, dzslides...)
    USVString vendor;

    // A recursive (as in array in array in array...) list of ordered "addressable" steps with their details
    sequence<StepDescriptor> steps;

    // '16/9', '4/3' and 'auto'...
    sequence<USVString> ratios;

    // Theme names like "default", "low-contrast-projector"...
    sequence<USVString> themes;
}
----

[source]
----
dictionary StepDescriptor {
    // The "address" of the step usable with the `GO_TO` command
    USVString cursor;

    // A given step of the talk can have many states like playing a video/audio or zooming a picture
    sequence<USVString> states;

    // HTML notes
    USVString notes;
}
----

These events MUST be sent back with :

[source,js]
----
source.postMessage({ event, eventData }, '*')
----
